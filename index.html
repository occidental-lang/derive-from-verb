<html>

<head>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

</head>
<body>

  <div class="jumbotron jumbotron-fluid">
    <div class="container">
      <h1 class="display-4">Occidental Verbal Derivation</h1>
      <p class="lead">See <a href="https://en.wikipedia.org/wiki/De_Wahl%27s_rule">here</a> and <a href="https://occidental-lang.com/grammatica/#/10-Verb?id=verbal-derivation">here</a> for more info.</p>
    </div>
  </div>

  <div class="container">

    <div class="row">
      <p>Enter Occidental infinitive: <input id="verb" type="search" placeholder="mover" onchange="derive(this)"></p>
    </div>

    
    <div id="result"></div>
    </div>
  </div>

  <script src="utility.js"></script>

  <script>
    if (window.location.search != "") {
      document.getElementById('verb').value = window.location.search.slice(1);
      var e = new Event('change');
      document.getElementById('verb').dispatchEvent(e);
    }

    function derive(element) {
      var word = element.value.toLowerCase();
      var type = getType(word);
      var presentTheme = getPresentTheme(word);
      var verbalRoot = getVerbalRoot(word);
      var perfectTheme = getPerfectTheme(word, type);

      var derivatives = getDerivatives(word, perfectTheme, presentTheme, verbalRoot, type);

      var result = `
      <div class="row">
        <div class="col"><p>Infinitive: ${word}</p></div><div class="col"><p>Type: ${type}</p></div>
      </div>

      <div class="row">
        <table class="table table-bordered table-hover">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Formula</th>
              <th scope="col">Derivative</th>
              <th scope="col">Explanation</th>
              <th scope="col">Example</th>
            </tr>
          </thead><tbody>`;

      for(let d of derivatives){
        result += `
        <tr>
          <td>${d.formula}</td>
          <td><b>${d.derivative}</b></td>
          <td>${d.explanation}</td>
          <td>${d.example}</td>
        </tr>
        `;
      }

      result += `</tbody></table></div>`;

      document.getElementById("result").innerHTML = result;

    }
  </script>

</body>
</html>
